<!DOCTYPE html><html><head><meta http-equiv="Content-type" content="text/html" charset="UTF-8" /><script>$$HREPR = {
    scriptStatus: {},
    counters: {},
    fromHTML(html) {
        const node = document.createElement("div");
        node.innerHTML = html;
        return node.childNodes[0];
    },
    prepare(node_id) {
        const self = document.getElementById(node_id);
        let resolve = null;
        self.__object = new Promise((rs, rj) => { resolve = rs });
        self.__object.__resolve = resolve;
        return self;
    },
    swap(orig, repl) {
        if (repl) {
            if (repl.getElement) {
                repl = repl.getElement();
            }
            if (repl instanceof HTMLElement) {
                repl.__object = orig.__object;
                repl.setAttribute("id", orig.getAttribute("id"));
                orig.replaceWith(repl);
            }
            else {
                orig.remove();
            }
        }
    },
    isFunc(x) {
        let hasprop = prop => Object.getOwnPropertyNames(x).includes(prop);
        return (hasprop("arguments") || !hasprop("prototype"));
    },
    loadScripts(scripts, cb) {
        if (scripts.length == 0) {
            cb();
            return;
        }
        const counter = {count: scripts.length, callback: cb};
        for (let script of scripts) {
            let counters = (this.counters[script] ||= []);
            counters.push(counter);
            if (this.scriptStatus[script] === undefined) {
                this.scriptStatus[script] = false;
                function onLoad() {
                    $$HREPR.scriptStatus[script] = true;
                    $$HREPR.triggerScript(script);
                }
                let scriptTag = document.createElement("script");
                scriptTag.src = script;
                scriptTag.onload = onLoad;
                document.head.appendChild(scriptTag);    
            }
            else if (this.scriptStatus[script]) {
                $$HREPR.triggerScript(script);
            }
        }
    },
    triggerScript(script) {
        for (let counter of this.counters[script] || []) {
            counter.count--;
            if (!counter.count) {
                counter.callback();
            }
        }
    },
    ucall(obj, sym, ...arglist) {
        if (sym) {
            return $$HREPR.isFunc(obj[sym]) ? obj[sym](...arglist) : new obj[sym](...arglist);
        }
        else {
            return $$HREPR.isFunc(obj) ? obj(...arglist) : new obj(...arglist);
        }
    },
}

</script></head><body><div><h2>The buttons should increment by 2, 3 and 4 respectively.</h2><h4>Note: this will NOT work when browsing the file directly, view using a server e.g. with `python -m http.server`.</h4><button style="width:100px;" id="H8">ERROR!</button><button style="width:100px;" id="H13">ERROR!</button><button style="width:100px;" id="H16">ERROR!</button></div><script>$$HREPR.prepare("H8");</script><script type="module">import { bytwo as bytwo__19 } from "./counter.esm.js";
const $$INTO = document.getElementById("H8");
$$HREPR.loadScripts([],()=>{
const obj = $$HREPR.ucall(bytwo__19,null,$$INTO);
$$INTO.__object.__resolve(obj);

});</script><script>$$HREPR.prepare("H13");</script><script type="module">import { by as by__22 } from "./counter.esm.js";
const $$INTO = document.getElementById("H13");
$$HREPR.loadScripts([],()=>{
const obj = $$HREPR.ucall(by__22,"three",$$INTO);
$$INTO.__object.__resolve(obj);

});</script><script>$$HREPR.prepare("H16");</script><script type="module">import default__25 from "./counter.esm.js";
const $$INTO = document.getElementById("H16");
$$HREPR.loadScripts([],()=>{
const obj = $$HREPR.ucall(default__25,null,$$INTO,{"increment": 4});
$$INTO.__object.__resolve(obj);

});</script></body></html>